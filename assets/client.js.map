{
  "version": 3,
  "sources": ["../client/src/util.ts", "../client/src/menu.ts", "../client/src/flash.ts", "../client/src/editor.ts", "../client/src/sortable.ts", "../client/src/client.ts"],
  "sourcesContent": ["export const appKey = \"admini\";\nexport const appName = \"Admini\";\n", "import \"./client.css\"\n\nexport function menuInit() {\n  for (const n of Array.from(document.querySelectorAll(\".menu-container .final\"))) {\n    n.scrollIntoView({block: \"nearest\"});\n  }\n}\n", "import \"./client.css\"\n\nexport function flashInit() {\n  const container = document.getElementById(\"flash-container\")\n  if (container === null) {\n    return;\n  }\n  const x = container.querySelectorAll(\".flash\");\n  if (x.length > 0) {\n    setTimeout(() => {\n      for (const f of x) {\n        const el = f as HTMLElement;\n        el.style.opacity = \"0\";\n        setTimeout(() => el.remove(), 500);\n      }\n    }, 3000)\n  }\n}\n", "const selected = \"--selected\";\n\nexport function editorInit() {\n  let editorCache: { [key: string]: string; } = {};\n  let selectedCache: { [key: string]: HTMLInputElement; } = {};\n  for (const n of Array.from(document.querySelectorAll(\".editor\"))) {\n    const frm = n as HTMLFormElement;\n    const buildCache = () => {\n      editorCache = {};\n      selectedCache = {};\n      for (const el of frm.elements) {\n        const input = el as HTMLInputElement;\n        if (input.name.length > 0) {\n          if (input.name.endsWith(selected)) {\n            selectedCache[input.name] = input;\n          } else {\n            if ((input.type !== \"radio\") || input.checked) {\n              editorCache[input.name] = input.value;\n            }\n            const evt = () => {\n              selectedCache[input.name + selected].checked = editorCache[input.name] !== input.value;\n            };\n            input.onchange = evt;\n            input.onkeyup = evt;\n          }\n        }\n      }\n      console.log(editorCache);\n    }\n    frm.onreset = buildCache;\n    buildCache();\n  }\n}\n", "export function sortableInit() {\n  const Sortable = (window as any).Sortable;\n  if (Sortable) {\n    for (const dd of Array.from(document.getElementsByClassName(\"drag-container\"))) {\n      let l = dd.querySelector(\".l\");\n      if (!l) {\n        l = dd;\n      }\n      const lOpts = {group: {name: 'nested'}, handle: '.handle', onAdd: onAdd, animation: 150, fallbackOnBody: true, swapThreshold: 0.65};\n      function onAdd(ev: Event) {\n        const i = (ev as any).item as HTMLElement;\n        new Sortable(i.querySelector(\".container\"), lOpts);\n        (i.querySelector(\".remove\") as HTMLElement).onclick = function() { remove(dd, i); };\n        update(dd);\n      }\n      for (const c of Array.from(l.getElementsByClassName('container'))) {\n        new Sortable(c, lOpts);\n      }\n      for (const rem of Array.from(l.getElementsByClassName(\"remove\"))) {\n        (rem as HTMLElement).onclick = function() { remove(dd, rem.parentElement?.parentElement!); };\n      }\n\n      const r = dd.querySelector(\".r\");\n      if (r) {\n        const rOpts = {group: {name: 'nested', pull: \"clone\", put: false}, handle: '.handle', animation: 150, fallbackOnBody: true, swapThreshold: 0.65, sort: false};\n        for (const c of Array.from(r.getElementsByClassName('container'))) {\n          new Sortable(c, rOpts);\n        }\n      }\n      update(dd)\n    }\n  }\n}\n\nfunction remove(dd: Element, rem: Element) {\n  rem.remove();\n  update(dd);\n}\n\nfunction update(dd: Element) {\n  const sEl = document.querySelector(\".drag-state\") as HTMLInputElement;\n  if (!sEl) {\n    return;\n  }\n  const origEl = document.querySelector(\".drag-state-original\") as HTMLInputElement;\n  const trackedEl = dd.querySelector(\".tracked\") as HTMLElement;\n  const js = JSON.stringify(readContainer(trackedEl));\n  if (origEl) {\n    if (origEl.value.length === 0) {\n      origEl.value = js;\n    }\n    const aEl = document.querySelector(\".drag-actions\") as HTMLElement;\n    if (origEl.value === js) {\n      aEl.classList.add('no-changes');\n    } else {\n      aEl.classList.remove('no-changes');\n    }\n  }\n\n  sEl.value = js;\n}\n\ninterface Item {\n  k: string\n  p: string\n  c?: Item[]\n}\n\nfunction readContainer(c: Element): Item[] {\n  const ret: Item[] = [];\n  for (const i of Array.from(c.children)) {\n    if (i.classList.contains(\"item\")) {\n      const item = readItem(i as HTMLElement);\n      if (item) {\n        ret.push(item);\n      }\n    }\n  }\n  return ret;\n}\n\nfunction readItem(i: HTMLElement): Item | undefined {\n  var ret: Item = {\n    k: i.dataset.key as string,\n    p: i.dataset.originalPath as string\n  };\n  for (const x of Array.from(i.children)) {\n    if (x.classList.contains(\"container\")) {\n      const kids = readContainer(x);\n      if (kids.length > 0) {\n        ret.c = kids;\n      }\n    }\n  }\n  return ret;\n}\n", "import \"./client.css\"\nimport {appName} from \"./util\";\nimport {menuInit} from \"./menu\";\nimport {flashInit} from \"./flash\";\nimport {editorInit} from \"./editor\";\nimport {sortableInit} from \"./sortable\";\n\nexport function init(): void {\n  console.log(\"[\" + appName + \"]\");\n  menuInit();\n  flashInit();\n  editorInit();\n  sortableInit();\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n"],
  "mappings": "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",
  "names": []
}
