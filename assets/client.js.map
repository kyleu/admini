{
  "version": 3,
  "sources": ["../client/src/util.ts", "../client/src/menu.ts", "../client/src/flash.ts", "../client/src/editor.ts", "../client/src/dragdrop.ts", "../client/src/client.ts"],
  "sourcesContent": ["export const appKey = \"admini\";\nexport const appName = \"Admini\";\n", "import \"./client.css\"\n\nexport function menuInit() {\n  for (const n of Array.from(document.querySelectorAll(\".menu-container .final\"))) {\n    n.scrollIntoView({block: \"nearest\"});\n  }\n}\n", "import \"./client.css\"\n\nexport function flashInit() {\n  const container = document.getElementById(\"flash-container\")\n  if (container === null) {\n    return;\n  }\n  const x = container.querySelectorAll(\".flash\");\n  if (x.length > 0) {\n    setTimeout(() => {\n      for (const f of x) {\n        const el = f as HTMLElement;\n        el.style.opacity = \"0\";\n        setTimeout(() => el.remove(), 500);\n      }\n    }, 3000)\n  }\n}\n", "const selected = \"--selected\";\n\nexport function editorInit() {\n  let editorCache: { [key: string]: string; } = {};\n  let selectedCache: { [key: string]: HTMLInputElement; } = {};\n  for (const n of Array.from(document.querySelectorAll(\".editor\"))) {\n    const frm = n as HTMLFormElement;\n    const buildCache = () => {\n      editorCache = {};\n      selectedCache = {};\n      for (const el of frm.elements) {\n        const input = el as HTMLInputElement;\n        if (input.name.length > 0) {\n          if (input.name.endsWith(selected)) {\n            selectedCache[input.name] = input;\n          } else {\n            if ((input.type !== \"radio\") || input.checked) {\n              editorCache[input.name] = input.value;\n            }\n            const evt = () => {\n              selectedCache[input.name + selected].checked = editorCache[input.name] !== input.value;\n            };\n            input.onchange = evt;\n            input.onkeyup = evt;\n          }\n        }\n      }\n      console.log(editorCache);\n    }\n    frm.onreset = buildCache;\n    buildCache();\n  }\n}\n", "export function dragDropInit() {\n  const lmdd = (window as any).lmdd;\n  if (lmdd) {\n    for (const dd of Array.from(document.getElementsByClassName(\"drag-container\"))) {\n      var opts = { containerClass: \"container\", draggableItemClass: \"item\", handleClass: \"\" };\n      if (dd.getElementsByClassName(\"handle\").length > 0) {\n        opts.handleClass = \"handle\";\n      }\n      lmdd.set(dd, opts);\n      dd.addEventListener(\"lmddend\", function (ev) { update(dd, ev); }, false);\n      for (const rem of Array.from(dd.getElementsByClassName(\"remove\"))) {\n        (rem as HTMLElement).onclick = function() { remove(dd, rem.parentElement?.parentElement!); };\n      }\n\n      update(dd, null);\n    }\n  }\n}\n\nfunction remove(dd: Element, rem: Element) {\n  rem.remove();\n  update(dd, null);\n}\n\nfunction update(dd: Element, ev: Event | null) {\n  if(ev) {\n    const to = (ev as any).detail.to;\n    if (to) {\n      const el = to.container.children.item(to.index) as HTMLElement\n      for (const rem of Array.from(el.getElementsByClassName(\"remove\"))) {\n        if ((rem as HTMLElement).onclick === null) {\n          (rem as HTMLElement).onclick = function() { remove(dd, el); };\n        }\n      }\n    }\n  }\n  const stateEls = dd.getElementsByClassName(\"drag-state\");\n  if (stateEls.length !== 1) {\n    return;\n  }\n  const sEl = (stateEls.item(0) as HTMLInputElement);\n  const origEls = dd.getElementsByClassName(\"drag-state-original\");\n  const tracked = dd.getElementsByClassName(\"tracked\");\n  if (tracked.length > 1) {\n    throw \"too many tracked drag/drops\";\n  }\n  if (tracked.length === 1) {\n    const el = tracked.item(0) as HTMLElement;\n    const js = JSON.stringify(readContainer(el));\n    if (origEls.length === 1) {\n      const oEl = (origEls.item(0) as HTMLInputElement);\n      if (oEl.value.length === 0) {\n        oEl.value = js;\n      }\n      const actions = dd.parentElement!.getElementsByClassName(\"actions\");\n      if (actions.length === 1) {\n        const aEl = (actions.item(0) as HTMLElement);\n        aEl.style.opacity = oEl.value === js ? \"0\" : \"1\";\n      }\n    }\n\n    sEl.value = js;\n  }\n}\n\ninterface Item {\n  k: string\n  p: string\n  c?: Item[]\n}\n\nfunction readContainer(c: Element): Item[] {\n  const ret: Item[] = [];\n  for (const i of Array.from(c.children)) {\n    if (i.classList.contains(\"item\")) {\n      const item = readItem(i as HTMLElement);\n      if (item) {\n        ret.push(item);\n      }\n    }\n  }\n  return ret;\n}\n\nfunction readItem(i: HTMLElement): Item | undefined {\n  var ret: Item = {\n    k: i.dataset.key as string,\n    p: i.dataset.originalPath as string\n  };\n  for (const x of Array.from(i.children)) {\n    if (x.classList.contains(\"container\")) {\n      const kids = readContainer(x);\n      if (kids.length > 0) {\n        ret.c = kids;\n      }\n    }\n  }\n  return ret;\n}\n", "import \"./client.css\"\nimport {appName} from \"./util\";\nimport {menuInit} from \"./menu\";\nimport {flashInit} from \"./flash\";\nimport {editorInit} from \"./editor\";\nimport {dragDropInit} from \"./dragdrop\";\n\nexport function init(): void {\n  console.log(\"[\" + appName + \"]\");\n  menuInit();\n  flashInit();\n  editorInit();\n  dragDropInit();\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n"],
  "mappings": "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",
  "names": []
}
