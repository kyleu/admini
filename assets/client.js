(()=>{function f(){for(let e of Array.from(document.querySelectorAll(".menu-container .final")))e.scrollIntoView({block:"nearest"})}function d(){let e=document.getElementById("flash-container");if(e===null)return;let t=e.querySelectorAll(".flash");t.length>0&&setTimeout(()=>{for(let n of t){let r=n;r.style.opacity="0",setTimeout(()=>r.remove(),500)}},3e3)}var y="--selected";function p(){let e={},t={};for(let n of Array.from(document.querySelectorAll(".editor"))){let r=n,s=()=>{e={},t={};for(let a of r.elements){let o=a;if(o.name.length>0)if(o.name.endsWith(y))t[o.name]=o;else{(o.type!=="radio"||o.checked)&&(e[o.name]=o.value);let l=()=>{let i=t[o.name+y];i&&(i.checked=e[o.name]!==o.value)};o.onchange=l,o.onkeyup=l}}};r.onreset=s,s()}}function E(){if(window.Sortable)for(let e of Array.from(document.getElementsByClassName("sortable")))g(e)}function h(e){for(;e.parentElement&&!e.classList.contains("drag-container");)e=e.parentElement;e.classList.remove("readonly"),g(e)}function g(e){let t=window.Sortable;if(t){let n=e.querySelector(".l");n||(n=e);let s={group:{name:"nested"},handle:".handle",onAdd:o=>{let l=o.item;new t(l.querySelector(".container"),s),l.querySelector(".remove").onclick=function(){L(e,l)},c(e)},onUpdate:()=>c(e),animation:150,fallbackOnBody:!0,swapThreshold:.65};for(let o of Array.from(n.getElementsByClassName("container")))new t(o,s);for(let o of Array.from(n.getElementsByClassName("remove")))o.onclick=function(){L(e,o.parentElement?.parentElement)};let a=e.querySelector(".r");if(a){let o={group:{name:"nested",pull:"clone",put:!1},handle:".handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,sort:!1};for(let l of Array.from(a.getElementsByClassName("container")))new t(l,o)}c(e)}}function L(e,t){t.remove(),c(e)}function c(e){let t=document.querySelector(".drag-state");if(!t)return;let n=document.querySelector(".drag-state-original"),r=e.querySelector(".tracked"),[s,a]=k(r),o=JSON.stringify(s);if(n){n.value.length===0&&(n.value=o);let l=document.querySelector(".drag-actions");l&&(n.value===o?l.classList.add("no-changes"):l.classList.remove("no-changes"));let i=document.querySelector(".drag-tracked-size");i&&(a===1?i.innerText=a.toString(10)+(i.dataset.sing?" "+i.dataset.sing:""):i.innerText=a.toString(10)+(i.dataset.plur?" "+i.dataset.plur:""))}t.value=o}function k(e){let t=0,n=[];for(let r of Array.from(e.children))if(r.classList.contains("item")){let[s,a]=M(r);s&&n.push(s),t+=a}return[n,t]}function M(e){let t=1,n={k:e.dataset.key,p:e.dataset.originalPath};for(let r of Array.from(e.children))if(r.classList.contains("container")){let[s,a]=k(r);s.length>0&&(n.c=s),t+=a}return[n,t]}function b(){for(let e of Array.from(document.getElementsByClassName("link-confirm"))){let t=e;t.onclick=function(){let n=t.dataset.message;return n&&n.length===0&&(n="Are you sure?"),confirm(n)}}}var v=[];function I(){let e=document.querySelectorAll(".color-var");if(e.length>0)for(let t of Array.from(e)){let n=t,r=n.dataset.var;v.push(r),!(!r||r.length===0)&&(n.oninput=function(){document.documentElement.style.setProperty("--"+r,n.value)})}}function T(){for(let e of v)document.documentElement.style.removeProperty("--"+e)}function S(e){let t=e.parentElement.parentElement.querySelector("input");if(!t)throw"no associated input found";t.value="\u2205"}var m="mode-light",u="mode-dark";function A(){for(let e of Array.from(document.getElementsByClassName("mode-input"))){let t=e;t.onclick=function(){switch(t.value){case"":document.body.classList.remove(m),document.body.classList.remove(u);break;case"light":document.body.classList.add(m),document.body.classList.remove(u);break;case"dark":document.body.classList.remove(m),document.body.classList.add(u);break}}}}function H(){window.admini={sortableEdit:h,themeReset:T,setSiblingToNull:S},f(),A(),d(),b(),p(),E(),I()}document.addEventListener("DOMContentLoaded",H);})();
//# sourceMappingURL=client.js.map
