(()=>{function g(){for(let e of Array.from(document.querySelectorAll(".menu-container .final")))e.scrollIntoView({block:"nearest"})}var f="mode-light",k="mode-dark";function p(){for(let e of Array.from(document.getElementsByClassName("mode-input"))){let n=e;n.onclick=function(){switch(n.value){case"":document.body.classList.remove(f),document.body.classList.remove(k);break;case"light":document.body.classList.add(f),document.body.classList.remove(k);break;case"dark":document.body.classList.remove(f),document.body.classList.add(k);break}}}}function y(){let e=document.getElementById("flash-container");if(e===null)return;let n=e.querySelectorAll(".flash");n.length>0&&setTimeout(()=>{for(let t of n){let o=t;o.style.opacity="0",setTimeout(()=>o.remove(),500)}},3e3)}function h(){for(let e of Array.from(document.getElementsByClassName("link-confirm"))){let n=e;n.onclick=function(){let t=n.dataset.message;return t&&t.length===0&&(t="Are you sure?"),confirm(t)}}}function E(){document.addEventListener("keydown",e=>{e.key==="Escape"&&document.location.hash.startsWith("#modal-")&&(document.location.hash="")})}var b="--selected";function H(e){let n=e.parentElement.parentElement.querySelector("input");if(!n)throw"no associated input found";n.value="\u2205"}function L(){window.admini.setSiblingToNull=H;let e={},n={};for(let t of Array.from(document.querySelectorAll(".editor"))){let o=t,a=()=>{e={},n={};for(let s of o.elements){let r=s;if(r.name.length>0)if(r.name.endsWith(b))n[r.name]=r;else{(r.type!=="radio"||r.checked)&&(e[r.name]=r.value);let c=()=>{let m=n[r.name+b];m&&(m.checked=e[r.name]!==r.value)};r.onchange=c,r.onkeyup=c}}};o.onreset=a,a()}}var q=[];function I(){let e=document.querySelectorAll(".color-var");if(e.length>0)for(let n of Array.from(e)){let t=n,o=t.dataset.var,a=t.dataset.mode;q.push(o),!(!o||o.length===0)&&(t.oninput=function(){x(a,o,t.value)})}}function x(e,n,t){let o=document.querySelector("#mockup-"+e);if(!o){console.error("can't find mockup for mode ["+e+"]");return}switch(n){case"color-foreground":i(o,".mock-main",t);break;case"color-background":u(o,".mock-main",t);break;case"color-foreground-muted":i(o,".mock-main .mock-muted",t);break;case"color-background-muted":u(o,".mock-main .mock-muted",t);break;case"color-link-foreground":i(o,".mock-main .mock-link",t);break;case"color-link-visited-foreground":i(o,".mock-main .mock-link-visited",t);break;case"color-nav-foreground":i(o,".mock-nav",t),i(o,".mock-nav .mock-link",t);break;case"color-nav-background":u(o,".mock-nav",t);break;case"color-menu-foreground":i(o,".mock-menu",t),i(o,".mock-menu .mock-link",t);break;case"color-menu-background":u(o,".mock-menu",t);break;case"color-menu-selected-foreground":i(o,".mock-menu .mock-link-selected",t);break;case"color-menu-selected-background":u(o,".mock-menu .mock-link-selected",t);break;default:console.error("invalid key ["+n+"]")}}function T(e,n,t){let o=e.querySelectorAll(n);if(o.length==0)throw"empty query selector ["+n+"]";o.forEach(a=>{t(a)})}function u(e,n,t){T(e,n,o=>o.style.backgroundColor=t)}function i(e,n,t){T(e,n,o=>o.style.color=t)}function w(){if(window.Sortable){window.admini.sortableEdit=C;for(let e of Array.from(document.getElementsByClassName("sortable")))v(e)}}function C(e){for(;e.parentElement&&!e.classList.contains("drag-container");)e=e.parentElement;e.classList.remove("readonly"),v(e)}function v(e){let n=window.Sortable;if(n){let t=e.querySelector(".l");t||(t=e);let a={group:{name:"nested"},handle:".handle",onAdd:r=>{let c=r.item;new n(c.querySelector(".container"),a),c.querySelector(".remove").onclick=function(){S(e,c)},d(e)},onUpdate:()=>d(e),animation:150,fallbackOnBody:!0,swapThreshold:.65};for(let r of Array.from(t.getElementsByClassName("container")))new n(r,a);for(let r of Array.from(t.getElementsByClassName("remove")))r.onclick=function(){S(e,r.parentElement?.parentElement)};let s=e.querySelector(".r");if(s){let r={group:{name:"nested",pull:"clone",put:!1},handle:".handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,sort:!1};for(let c of Array.from(s.getElementsByClassName("container")))new n(c,r)}d(e)}}function S(e,n){n.remove(),d(e)}function d(e){let n=document.querySelector(".drag-state");if(!n)return;let t=document.querySelector(".drag-state-original"),o=e.querySelector(".tracked"),[a,s]=A(o),r=JSON.stringify(a);if(t){let c=t.value!==r;t.value.length===0&&(t.value=r);let m=document.querySelector(".drag-actions");m&&(c?m.classList.remove("no-changes"):m.classList.add("no-changes"));let l=document.querySelector(".drag-tracked-size");l&&(s===1?l.innerText=s.toString(10)+(l.dataset.sing?" "+l.dataset.sing:""):l.innerText=s.toString(10)+(l.dataset.plur?" "+l.dataset.plur:"")),c?window.onbeforeunload=function(){return!0}:window.onbeforeunload=null}n.value=r}function A(e){if(e.children.length===0)return[[],0];let n=0,t=[];for(let o of Array.from(e.children))if(o.classList.contains("item")){let[a,s]=B(o);a&&t.push(a),n+=s}return[t,n]}function B(e){let n=1,t={k:e.dataset.key,t:e.dataset.title,p:e.dataset.originalPath};for(let o of Array.from(e.children))if(o.classList.contains("container")){let[a,s]=A(o);a.length>0&&(t.c=a),n+=s}return[t,n]}function M(){w()}function N(){window.admini={},g(),p(),y(),h(),E(),L(),I(),M()}document.addEventListener("DOMContentLoaded",N);})();
//# sourceMappingURL=client.js.map
